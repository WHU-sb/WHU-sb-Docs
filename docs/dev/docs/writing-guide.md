# 文档编写指南

## 概述

本文档旨在帮助开发团队编写高质量的技术文档，避免"泛泛而谈"和"代码堆砌"两种极端，实现理论与实践的良好平衡。

## 文档编写原则

### 1. 目标导向
- **明确受众**: 确定文档的目标读者（开发者、运维、用户等）
- **解决实际问题**: 文档应该能够帮助读者解决具体的开发问题
- **提供价值**: 每篇文档都应该有明确的价值主张

### 2. 结构清晰
- **逻辑层次**: 使用清晰的标题层次和逻辑结构
- **信息密度**: 平衡信息密度，避免过于冗长或过于简略
- **易于导航**: 提供目录、索引和交叉引用

### 3. 实用性强
- **可操作性**: 提供具体的操作步骤和示例
- **可验证性**: 示例代码应该是可运行的
- **可维护性**: 文档应该易于更新和维护

## 文档类型和编写策略

### 1. 架构文档

**目标**: 帮助开发者理解系统整体架构和设计决策

**编写策略**:
- 从高层设计开始，逐步深入到具体实现
- 结合架构图和代码示例说明设计思路
- 解释关键的技术选型和权衡考虑

**示例结构**:
```markdown
# 系统架构

## 概述
[简要介绍系统目标和整体架构]

## 架构图
[提供清晰的架构图]

## 核心组件
### 组件A
- **职责**: 具体负责什么功能
- **设计考虑**: 为什么这样设计
- **实现示例**: 关键代码片段
- **配置说明**: 如何配置和部署

### 组件B
[类似结构...]

## 数据流
[描述组件间的数据流动]

## 部署架构
[说明生产环境的部署方式]
```

### 2. API 文档

**目标**: 帮助开发者正确使用 API

**编写策略**:
- 提供完整的请求/响应示例
- 解释每个参数的作用和约束
- 包含错误处理和最佳实践

**示例结构**:
```markdown
# API 设计

## 概述
[API 的设计原则和规范]

## 认证
[认证方式和 token 管理]

## 课程管理 API

### 获取课程列表
**端点**: `GET /api/v1/courses`

**功能说明**: 获取课程列表，支持分页、搜索和筛选

**请求参数**:
- `page` (int): 页码，默认 1
- `page_size` (int): 每页数量，默认 20，最大 100
- `search` (string): 搜索关键词
- `teacher` (string): 按教师筛选

**请求示例**:
```bash
curl -X GET "http://localhost:8080/api/v1/courses?page=1&page_size=10&search=计算机"
```

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "courses": [
      {
        "id": 1,
        "name": "计算机科学导论",
        "code": "CS101",
        "teacher": "张三",
        "credits": 3,
        "rating": 4.5,
        "review_count": 10
      }
    ],
    "meta": {
      "page": 1,
      "page_size": 10,
      "total": 50,
      "total_pages": 5
    }
  }
}
```

**错误处理**:
- 400: 参数错误
- 500: 服务器内部错误

**最佳实践**:
1. 使用分页避免一次性获取大量数据
2. 合理使用搜索和筛选参数
3. 缓存常用查询结果
```

### 3. 开发指南

**目标**: 帮助开发者快速上手和解决常见问题

**编写策略**:
- 提供完整的环境搭建步骤
- 包含常见问题的解决方案
- 给出最佳实践和代码示例

**示例结构**:
```markdown
# 开发环境搭建

## 环境要求
[列出具体的版本要求]

## 快速开始

### 1. 克隆项目
```bash
git clone https://github.com/WHU-sb/WHU-sb.git
cd whu.sb/backend
```

### 2. 安装依赖
```bash
go mod download
```

### 3. 配置环境
```bash
cp config/config.example.toml config/config.toml
# 编辑配置文件
```

### 4. 启动服务
```bash
go run cmd/main.go serve
```

## 开发流程

### 代码规范
[具体的代码规范要求]

### 测试要求
[测试覆盖率和测试方法]

### 提交规范
[Git 提交信息格式]

## 常见问题

### Q: 数据库连接失败
**A**: 检查数据库配置和网络连接...

### Q: 编译错误
**A**: 确保 Go 版本正确，清理缓存...

## 最佳实践
[开发过程中的最佳实践]
```

### 4. 组件文档

**目标**: 帮助开发者理解和使用组件

**编写策略**:
- 说明组件的设计目标和适用场景
- 提供完整的使用示例
- 解释关键属性和事件

**示例结构**:
```markdown
# 组件开发指南

## 设计原则
[组件的设计理念和原则]

## 组件分类

### UI 基础组件

#### AppButton 按钮组件

**设计目标**: 提供统一的按钮样式和交互体验

**核心特性**:
- 支持多种样式变体
- 支持加载状态
- 支持图标和文本组合

**Props 说明**:
- `label` (string): 按钮文本
- `icon` (string): 图标类名
- `severity` (string): 样式变体
- `loading` (boolean): 加载状态

**使用示例**:
```vue
<template>
  <!-- 基础用法 -->
  <AppButton label="提交" @click="handleSubmit" />
  
  <!-- 带图标 -->
  <AppButton 
    label="保存" 
    icon="pi pi-save" 
    severity="success" 
    @click="handleSave" 
  />
  
  <!-- 加载状态 -->
  <AppButton 
    label="提交" 
    :loading="isSubmitting" 
    @click="handleSubmit" 
  />
</template>
```

**最佳实践**:
1. 优先使用 `severity` 属性而不是自定义样式
2. 加载状态时自动禁用按钮
3. 危险操作使用 `danger` 样式

**注意事项**:
- 按钮文本应该简洁明了
- 避免在按钮中使用过长的文本
- 合理使用图标增强可读性
```

## 避免的常见问题

### 1. 泛泛而谈的问题

**问题表现**:
- 只列出技术栈名称和版本号
- 缺乏实际使用场景和配置说明
- 没有具体的代码示例

**改进方法**:
- 添加技术选型的原因和考虑
- 提供实际的配置示例
- 包含使用场景和最佳实践

**示例对比**:

❌ **泛泛而谈**:
```markdown
## 技术栈
- Vue 3.5.18
- TypeScript 5.9.2
- Vite 7.1.1
```

✅ **具体实用**:
```markdown
## 技术栈详解

### Vue 3.5.18
**选择原因**: 更好的性能、TypeScript 支持和组合式 API

**实际应用**:
```vue
<script setup lang="ts">
import { ref, computed } from 'vue'

// 响应式数据
const searchQuery = ref('')

// 计算属性
const filteredItems = computed(() => {
  return items.value.filter(item => 
    item.name.includes(searchQuery.value)
  )
})
</script>
```

**配置说明**:
```typescript
// vite.config.ts
export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  }
})
```
```

### 2. 代码堆砌的问题

**问题表现**:
- 直接丢代码块，缺乏说明
- 没有解释代码的作用和原理
- 缺乏使用场景和最佳实践

**改进方法**:
- 在代码前后添加详细说明
- 解释代码的设计思路
- 提供使用场景和注意事项

**示例对比**:

❌ **代码堆砌**:
```markdown
## 组件实现

```vue
<template>
  <Button :label="label" @click="$emit('click')" />
</template>

<script setup lang="ts">
defineProps<{ label: string }>()
defineEmits<{ click: [event: MouseEvent] }>()
</script>
```
```

✅ **平衡的写法**:
```markdown
## 组件实现

### 设计思路
这个按钮组件封装了 PrimeVue 的 Button 组件，提供统一的样式和交互体验。

### 核心功能
- 支持自定义标签文本
- 发射点击事件
- 使用 TypeScript 提供类型安全

### 代码实现
```vue
<template>
  <Button :label="label" @click="$emit('click')" />
</template>

<script setup lang="ts">
// 定义 props 接口
interface Props {
  label: string
}

// 定义事件接口
interface Emits {
  click: [event: MouseEvent]
}

defineProps<Props>()
defineEmits<Emits>()
</script>
```

### 使用示例
```vue
<template>
  <AppButton label="提交" @click="handleSubmit" />
</template>
```

### 最佳实践
1. 按钮文本应该简洁明了
2. 避免在按钮中使用过长的文本
3. 合理使用图标增强可读性
```

## 文档质量检查清单

### 内容质量
- [ ] 文档有明确的目标受众
- [ ] 解决了具体的实际问题
- [ ] 提供了可操作的指导
- [ ] 包含了必要的代码示例
- [ ] 解释了关键概念和原理

### 结构质量
- [ ] 使用了清晰的标题层次
- [ ] 信息组织逻辑合理
- [ ] 提供了导航和索引
- [ ] 包含了交叉引用

### 实用性
- [ ] 代码示例可以运行
- [ ] 配置说明完整准确
- [ ] 包含了错误处理
- [ ] 提供了最佳实践
- [ ] 涵盖了常见问题

### 可维护性
- [ ] 文档结构易于更新
- [ ] 代码示例与项目同步
- [ ] 版本信息准确
- [ ] 链接和引用有效

## 文档模板

### 技术文档模板

```markdown
# [文档标题]

## 概述
[简要介绍文档的目的和内容]

## 背景
[说明为什么需要这个功能或技术]

## 设计目标
[明确的设计目标和约束条件]

## 实现方案

### 核心概念
[解释关键概念和原理]

### 架构设计
[描述整体架构和组件关系]

### 关键实现
[重点代码实现和说明]

```[代码语言]
// 关键代码示例
```

### 配置说明
[详细的配置参数和说明]

## 使用指南

### 基本用法
[基础使用方法和示例]

### 高级用法
[高级功能和复杂场景]

### 最佳实践
[使用建议和注意事项]

## 常见问题

### Q: [常见问题1]
**A**: [详细解答]

### Q: [常见问题2]
**A**: [详细解答]

## 参考资源
[相关文档和链接]
```

### API 文档模板

```markdown
# [API 名称]

## 概述
[API 的功能和用途]

## 认证
[认证方式和要求]

## 端点

### [端点名称]
**方法**: `[HTTP方法]`
**路径**: `[API路径]`

**功能说明**: [详细功能描述]

**请求参数**:
- `param1` (type): 参数说明
- `param2` (type): 参数说明

**请求示例**:
```bash
curl -X [METHOD] "[URL]" \
  -H "Content-Type: application/json" \
  -d '[请求体]'
```

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    // 响应数据结构
  }
}
```

**错误码**:
- 400: 参数错误
- 401: 未认证
- 500: 服务器错误

**注意事项**:
[使用注意事项和限制]
```

## 总结

高质量的文档应该：

1. **理论与实践并重**: 既有理论解释，又有实际代码
2. **结构清晰**: 逻辑层次分明，易于阅读和导航
3. **实用性强**: 能够解决实际问题，提供可操作的指导
4. **易于维护**: 结构合理，便于更新和维护
5. **受众明确**: 针对特定读者群体，提供有价值的信息

通过遵循这些原则和模板，可以编写出平衡、实用、高质量的技术文档。
